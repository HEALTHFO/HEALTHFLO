<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>HealthFlo - Pharmacy & Medicines</title>

  <!-- Icons & Fonts -->
  <script src="js/patient-os.js"></script>
  <script src="js/localization.js"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Pharmacy Styles -->
  <link rel="stylesheet" href="css/patient-pharmacy.css" />

  <style>
    /* --- CORE THEME VARIABLES (From Dashboard) --- */
    :root {
      --bg-radial: radial-gradient(circle at 20% 30%, #506176 0%, #1a1f2b 55%, #0E121B 100%);
      --glass-bg: rgba(255, 255, 255, 0.03);
      --glass-border: rgba(255, 255, 255, 0.08);
      --glass-blur: blur(24px);
      --text-main: #ffffff;
      --text-muted: #94a3b8;
      --color-blue: #0A84FF;

      /* Overriding Pharmacy CSS Variables to match Dashboard Theme */
      --bg: transparent;
      --surface: rgba(22, 28, 38, 0.6);
      --surface-2: rgba(255, 255, 255, 0.05);
      --border: rgba(255, 255, 255, 0.08);
      --text: #ffffff;
      --muted: #94a3b8;
      --accent: #0A84FF;

      --sidebar-bg: rgba(255, 255, 255, 0.02);
      --browser-bar-bg: rgba(0, 0, 0, 0.2);
      --divider-color: rgba(255, 255, 255, 0.05);
    }

    /* --- DASHBOARD SHELL STYLES --- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', 'Plus Jakarta Sans', sans-serif;
    }

    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(100, 100, 100, 0.2);
      border-radius: 10px;
    }

    body {
      height: 100vh;
      width: 100vw;
      background: var(--bg-radial) !important;
      overflow: hidden;
      user-select: none;
      color: var(--text-main);
      font-family: 'Inter', sans-serif !important;
    }

    .app-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .browser-bar {
      height: 60px;
      display: flex;
      align-items: center;
      padding: 0 32px;
      gap: 24px;
      border-bottom: 1px solid var(--glass-border);
      background: var(--browser-bar-bg);
      backdrop-filter: blur(10px);
      z-index: 20;
      flex-shrink: 0;
    }

    .window-controls {
      display: flex;
      gap: 8px;
      margin-right: 12px;
    }

    .window-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      opacity: 0.8;
    }

    .branding-right {
      margin-left: auto;
      font-weight: 700;
      color: var(--text-main);
      letter-spacing: 1px;
      font-size: 14px;
      opacity: 0.8;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .branding-right span {
      color: var(--color-blue);
      text-shadow: 0 0 10px rgba(10, 132, 255, 0.5);
    }

    .theme-toggle {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: var(--glass-border);
      border: 1px solid var(--glass-border);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-muted);
      margin-left: 10px;
    }

    .dashboard-body {
      flex: 1;
      display: flex;
      overflow: hidden;
      position: relative;
    }

    .sidebar {
      width: 120px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 32px 0;
      gap: 18px;
      border-right: 1px solid var(--glass-border);
      z-index: 10;
      background: var(--sidebar-bg);
      backdrop-filter: var(--glass-blur);
      flex-shrink: 0;
    }

    .logo {
      font-weight: 800;
      color: var(--text-main);
      font-size: 24px;
      letter-spacing: -1px;
      margin-bottom: 12px;
    }

    .logo span {
      color: var(--color-blue);
    }

    .menu-item {
      width: 90px;
      height: 74px;
      border-radius: 16px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--text-muted);
      font-size: 22px;
      cursor: pointer;
      transition: 0.3s;
      border: 1px solid transparent;
      text-decoration: none;
      flex-direction: column;
      gap: 6px;
      padding: 10px;
      text-align: center;
    }

    .menu-item:hover {
      color: var(--text-main);
      background: var(--glass-bg);
      border-color: var(--glass-border);
    }

    .menu-item.active {
      background: var(--glass-border);
      color: var(--color-blue);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      border: 1px solid var(--glass-border);
    }

    .menu-item.danger {
      color: #ef4444;
    }

    .menu-label {
      font-size: 11px;
      font-weight: 700;
      color: inherit;
      letter-spacing: 0.2px;
    }

    .sidebar-divider {
      width: 60%;
      height: 1px;
      background: var(--divider-color);
      margin: 6px auto;
      opacity: 0.6;
    }

    .main-content {
      flex: 1;
      padding: 30px 40px;
      overflow-y: auto;
      position: relative;
      padding-bottom: 100px;
      display: block;
    }

    .header-section {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 30px;
      z-index: 5;
    }

    .page-title h2 {
      font-size: 18px;
      color: var(--color-blue);
      margin-bottom: 5px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .page-title h1 {
      font-size: 56px;
      font-weight: 700;
      color: var(--text-main);
      line-height: 1;
      letter-spacing: -2px;
    }

    .page-title h1 span {
      font-weight: 300;
      opacity: 0.8;
    }

    /* --- Overrides for Pharmacy CSS --- */
    .hf-header,
    .neo-dock,
    footer {
      display: none !important;
    }

    .hero {
      padding: 0 !important;
      overflow: visible !important;
    }

    .hero-inner {
      grid-template-columns: 1fr 1fr;
      background: transparent !important;
    }

    .wrap {
      width: 100% !important;
      max-width: 100% !important;
      margin: 0 !important;
    }

    .hero-right .glass-stack {
      background: var(--surface) !important;
      backdrop-filter: blur(12px);
      border: 1px solid var(--glass-border);
    }

    @media (max-width: 1200px) {
      .sidebar {
        display: none;
      }

      .hero-inner {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="app-container">
    <!-- Browser Bar -->
    <div class="browser-bar">
      <div class="window-controls">
        <div class="window-dot" style="background: #ef4444;"></div>
        <div class="window-dot" style="background: #f59e0b;"></div>
        <div class="window-dot" style="background: #10b981;"></div>
      </div>
      <div class="branding-right">
        <span data-i18n="app_name">HealthFlo</span>
        <span data-i18n="subtitle">CLINICAL V3</span>
      </div>

      <div style="margin-left:auto; display:flex; gap:10px;">
        <select id="lang-select" onchange="window.setLang(this.value)"
          style="background:var(--glass-bg); color:var(--text-main); border:1px solid var(--glass-border); padding:6px; border-radius:8px; width:80px;">
          <option value="en">ENG</option>
          <option value="ta">தமிழ்</option>
          <option value="hi">हिंदी</option>
          <option value="ml">മലയാളം</option>
          <option value="kn">ಕನ್ನಡ</option>
          <option value="te">తెలుగు</option>
        </select>
        <button class="theme-toggle" onclick="toggleTheme()"><i class="ph-bold ph-sun"></i></button>
      </div>
    </div>

    <div class="dashboard-body">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="logo">H<span>+</span></div>
        <a class="menu-item" href="patient-dashboard.html">
          <i class="ph ph-heartbeat"></i>
          <span class="menu-label" data-i18n="nav_dashboard">Dashboard</span>
        </a>
        <a class="menu-item" href="patient-health.html">
          <i class="ph ph-pulse"></i>
          <span class="menu-label" data-i18n="nav_health">Health</span>
        </a>
        <a class="menu-item" href="patient-organs.html">
          <i class="ph-bold ph-scan"></i>
          <span class="menu-label" data-i18n="nav_organs">Organs</span>
        </a>
        <a class="menu-item" href="patient-labs.html">
          <i class="ph ph-flask"></i>
          <span class="menu-label" data-i18n="nav_labs">Labs</span>
        </a>
        <a class="menu-item active" href="patient-pharmacy.html">
          <i class="ph-fill ph-pill"></i>
          <span class="menu-label" data-i18n="nav_pharmacy">Pharmacy</span>
        </a>
        <a class="menu-item" href="patient-hospitals.html">
          <i class="ph ph-hospital"></i>
          <span class="menu-label" data-i18n="nav_hospitals">Hospitals</span>
        </a>
        <a class="menu-item" href="patient-insurance.html">
          <i class="ph ph-shield-plus"></i>
          <span class="menu-label" data-i18n="nav_insurance">Insurance</span>
        </a>
        <a class="menu-item" href="patient-devices.html">
          <i class="ph ph-watch"></i>
          <span class="menu-label" data-i18n="nav_devices">Devices</span>
        </a>
        <a class="menu-item" href="patient-family.html">
          <i class="ph ph-users"></i>
          <span class="menu-label" data-i18n="nav_family">Family</span>
        </a>
        <a class="menu-item" href="patient-profile.html">
          <i class="ph ph-user"></i>
          <span class="menu-label" data-i18n="nav_profile">Profile</span>
        </a>
        <div class="sidebar-divider"></div>
        <a class="menu-item" href="patient-settings.html">
          <i class="ph ph-gear-six"></i>
          <span class="menu-label" data-i18n="nav_settings">Settings</span>
        </a>
        <a class="menu-item danger" href="index.html" style="margin-top: auto;">
          <i class="ph ph-power"></i>
          <span class="menu-label" data-i18n="nav_exit">Exit</span>
        </a>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="header-section">
          <div class="header-left">
            <div style="display: flex; flex-direction: column;">
              <div
                style="display: flex; align-items: center; gap: 8px; color: var(--color-blue); font-size: 13px; font-weight: 700; text-transform: uppercase; cursor: pointer;">
                <i class="ph-fill ph-map-pin"></i> Home - 12/B, Green Valley <i class="ph-bold ph-caret-down"></i>
              </div>
              <div class="page-title" style="margin-top: 4px;">
                <h1 style="font-size: 32px;">Pharmacy <span>Store</span></h1>
              </div>
            </div>
          </div>
          <div class="header-right" style="display: flex; gap: 12px;">
            <button class="pill outline" style="border: 1px solid var(--glass-border); color: var(--text-main);"
              onclick="window.location.href='patient-tracking.html?mode=pharmacy'"><i class="ph-bold ph-receipt"></i>
              Orders</button>
            <button class="pill solid" style="background: var(--color-blue); color: white;"><i
                class="ph-bold ph-shopping-cart"></i> <span id="cart-count">0</span> Items</button>
          </div>
        </div>

        <!-- Original Pharmacy Content (Wrapped) -->
        <!-- Search Hero -->
        <section class="search-hero"
          style="background: linear-gradient(135deg, rgba(10, 132, 255, 0.1) 0%, rgba(22, 28, 38, 0.0) 100%); border-radius: 20px; padding: 40px; text-align: center; margin-bottom: 30px; border: 1px solid var(--glass-border);">
          <h2 style="font-size: 28px; margin-bottom: 8px; color: white;">Order Medicines & Essentials</h2>
          <p style="opacity: 0.7; margin-bottom: 24px;">Compare prices across hospitals and private pharmacies. 20 min
            delivery.</p>
          <div style="max-width: 600px; margin: 0 auto; position: relative;">
            <i class="ph-bold ph-magnifying-glass"
              style="position: absolute; left: 16px; top: 16px; color: var(--text-muted); font-size: 20px;"></i>
            <input type="text" placeholder="Search for 'Paracetamol', 'Insulin', or 'Apollo Pharmacy'..."
              style="width: 100%; padding: 16px 16px 16px 50px; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); color: white; font-size: 16px;">
          </div>
        </section>

        <!-- Categories -->
        <h3 style="margin-bottom: 16px; font-size: 18px; color: white;">Shop by Category</h3>
        <div class="categories-grid"
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 16px; margin-bottom: 40px;">
          <div class="cat-card"
            style="background: var(--glass-bg); padding: 16px; border-radius: 12px; text-align: center; border: 1px solid var(--glass-border); cursor: pointer; transition: 0.2s;">
            <img src="https://cdn-icons-png.flaticon.com/512/883/883407.png"
              style="width: 40px; height: 40px; margin-bottom: 8px; filter: grayscale(100%) brightness(200%);">
            <div style="font-size: 12px; font-weight: 600;">Medicines</div>
          </div>
          <div class="cat-card"
            style="background: var(--glass-bg); padding: 16px; border-radius: 12px; text-align: center; border: 1px solid var(--glass-border); cursor: pointer; transition: 0.2s;">
            <img src="https://cdn-icons-png.flaticon.com/512/3004/3004458.png"
              style="width: 40px; height: 40px; margin-bottom: 8px; filter: grayscale(100%) brightness(200%);">
            <div style="font-size: 12px; font-weight: 600;">Lab Tests</div>
          </div>
          <div class="cat-card"
            style="background: var(--glass-bg); padding: 16px; border-radius: 12px; text-align: center; border: 1px solid var(--glass-border); cursor: pointer; transition: 0.2s;">
            <img src="https://cdn-icons-png.flaticon.com/512/2966/2966327.png"
              style="width: 40px; height: 40px; margin-bottom: 8px; filter: grayscale(100%) brightness(200%);">
            <div style="font-size: 12px; font-weight: 600;">Supplement</div>
          </div>
          <div class="cat-card"
            style="background: var(--glass-bg); padding: 16px; border-radius: 12px; text-align: center; border: 1px solid var(--glass-border); cursor: pointer; transition: 0.2s;">
            <img src="https://cdn-icons-png.flaticon.com/512/2966/2966486.png"
              style="width: 40px; height: 40px; margin-bottom: 8px; filter: grayscale(100%) brightness(200%);">
            <div style="font-size: 12px; font-weight: 600;">Essentials</div>
          </div>
        </div>

        <!-- Featured Pharmacies -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h3 style="font-size: 18px; color: white;">Top Pharmacies Near You</h3>
          <a href="#" style="color: var(--color-blue); font-size: 13px; text-decoration: none;">See all</a>
        </div>
        <div class="pharmacy-grid" id="pharmacy-list"
          style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 40px;">
          <!-- Injected by JS -->
        </div>

        <!-- Bestsellers -->
        <h3 style="font-size: 18px; color: white; margin-bottom: 16px;">Best Selling Medicines</h3>
        <div class="meds-marketplace" id="meds-list"
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
          <!-- Injected by JS -->
        </div>

        <!-- Float Cart -->
        <div id="float-cart"
          style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #10b981; color: white; padding: 16px 24px; border-radius: 50px; display: none; align-items: center; gap: 16px; box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4); cursor: pointer; z-index: 100; min-width: 300px; justify-content: space-between;">
          <div style="display: flex; flex-direction: column;">
            <span style="font-weight: 700; font-size: 13px;">2 Items added</span>
            <span style="font-size: 11px; opacity: 0.9;">View Cart</span>
          </div>
          <div style="font-weight: 800; font-size: 16px;">₹ 450 <i class="ph-bold ph-caret-right"></i></div>
        </div>

      </div>
    </div>

    <!-- Modals (Outside Main Content for Z-Index) -->
    <div id="storeModal" class="modal">
      <div class="sheet">
        <header class="sheet-head">
          <div>
            <h3 id="storeTitle">Store</h3>
          </div>
          <button id="storeClose" class="pill ghost">Close</button>
        </header>
        <div class="grid meds-grid capped" id="storeMedGrid"></div>
      </div>
    </div>

    <div id="medDetail" class="modal">
      <div class="sheet">
        <header class="sheet-head">
          <div>
            <h3 id="medTitle">Medicine</h3>
          </div>
          <button class="pill ghost" id="btnMedClose">Close</button>
        </header>
        <div class="med-detail-body">
          <div class="detail-pricing">
            <div><span>Best price</span><strong id="medPrice">₹0</strong></div>
            <div><span>MRP</span><strong id="medMrp">₹0</strong></div>
          </div>
          <div class="detail-tags" id="medTags"></div>
          <div class="detail-substitutes">
            <h4>Substitutes</h4>
            <div id="subGrid" class="grid meds-grid mini"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="toast" class="toast"></div>

  </div>

  <script>
    // In-Line Script for Marketplace Logic
    const PHARMACIES = [
      { name: "Apollo Pharmacy", rating: 4.5, time: "20 min", distance: "0.8 km", image: "https://www.apollopharmacy.in/assets/images/apollo-pharmacy-logo.svg", discount: "Flat 15% OFF" },
      { name: "MedPlus", rating: 4.2, time: "35 min", distance: "2.1 km", image: "", discount: "Free Delivery" },
      { name: "City Hospital Chemist", rating: 4.8, time: "15 min", distance: "0.5 km", image: "", discount: "24/7 Open" },
      { name: "Wellness Forever", rating: 4.6, time: "45 min", distance: "4 km", image: "", discount: "10% Cashback" }
    ];

    const MEDICINES = [
      { name: "Paracetamol 650", price: 30, mrp: 40, brand: "Dolo", type: "Strip of 15" },
      { name: "Azithromycin 500", price: 120, mrp: 150, brand: "Azithral", type: "Strip of 5" },
      { name: "Vitamin C", price: 300, mrp: 350, brand: "Limcee", type: "Bottle of 60" },
      { name: "N95 Mask", price: 50, mrp: 100, brand: "3M", type: "Pack of 1" },
      { name: "Hand Sanitizer", price: 80, mrp: 99, brand: "Dettol", type: "100ml" },
      { name: "Digital Thermometer", price: 250, mrp: 400, brand: "Omron", type: "1 Unit" }
    ];

    document.addEventListener('DOMContentLoaded', () => {
      renderPharmacies();
      renderMeds();
    });

    function renderPharmacies() {
      const grid = document.getElementById('pharmacy-list');
      if (!grid) return;
      grid.innerHTML = PHARMACIES.map(p => `
            <div style="background: var(--glass-bg); padding: 16px; border-radius: 16px; border: 1px solid var(--glass-border); display: flex; gap: 16px; align-items: center; transition: 0.2s; cursor: pointer;">
                <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                    <i class="ph-bold ph-storefront" style="font-size: 24px;"></i>
                </div>
                <div style="flex: 1;">
                    <h4 style="margin: 0; color: white;">${p.name}</h4>
                    <div style="font-size: 11px; opacity: 0.7; margin-top: 4px;">${p.distance} • ${p.time}</div>
                    <div style="margin-top: 8px; font-size: 10px; font-weight: 700; color: var(--color-blue); background: rgba(10, 132, 255, 0.1); padding: 2px 6px; border-radius: 4px; display: inline-block;">${p.discount}</div>
                </div>
                <div style="background: #10b981; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 700;">${p.rating}★</div>
            </div>
        `).join('');
    }

    function renderMeds() {
      const grid = document.getElementById('meds-list');
      if (!grid) return;
      grid.innerHTML = MEDICINES.map(m => `
            <div style="background: var(--glass-bg); padding: 16px; border-radius: 16px; border: 1px solid var(--glass-border); position: relative;">
                <div style="position: absolute; top: 10px; right: 10px; font-size: 20px; color: var(--text-muted); cursor: pointer;"><i class="ph-bold ph-heart"></i></div>
                <div style="height: 100px; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.2); border-radius: 12px; margin-bottom: 12px;">
                    <i class="ph-fill ph-pill" style="font-size: 40px; color: var(--color-blue);"></i>
                </div>
                <h4 style="margin: 0; font-size: 15px; color: white;">${m.name}</h4>
                <div style="font-size: 11px; opacity: 0.6; margin-bottom: 12px;">${m.brand} • ${m.type}</div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <span style="font-weight: 700; font-size: 16px;">₹${m.price}</span>
                        <span style="text-decoration: line-through; opacity: 0.5; font-size: 11px;">₹${m.mrp}</span>
                    </div>
                    <button onclick="addToCart(this)" style="background: white; color: black; border: none; padding: 6px 12px; border-radius: 6px; font-weight: 600; cursor: pointer;">ADD</button>
                </div>
            </div>
        `).join('');
    }

    let cartCount = 0;
    window.addToCart = (btn) => {
      cartCount++;
      document.getElementById('cart-count').innerText = cartCount;
      const floatCart = document.getElementById('float-cart');
      floatCart.style.display = 'flex';
      floatCart.querySelector('span:first-child').innerText = cartCount + ' Items added';
      floatCart.querySelector('.ph-caret-right').parentElement.innerText = '₹ ' + (cartCount * 120) + ' '; // Dummy Calc

      btn.innerText = 'ADDED';
      btn.style.background = '#10b981';
      btn.style.color = 'white';
      setTimeout(() => {
        btn.innerText = 'ADD';
        btn.style.background = 'white';
        btn.style.color = 'black';
      }, 2000);
    }
  </script>
</body>

</html>